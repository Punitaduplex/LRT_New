
@{
    ViewBag.Title = "Index";
    Layout = "~/_LayoutVendor.cshtml";
}
<script src="~/assets/js/jquery-2.1.4.min.js"></script>
<link rel="stylesheet" href="assets/css/bootstrap.min.css" />
<link rel="stylesheet" href="assets/font-awesome/4.5.0/css/font-awesome.min.css" />
<link rel="stylesheet" href="assets/css/fonts.googleapis.com.css" />
<link rel="stylesheet" href="assets/css/ace.min.css" class="ace-main-stylesheet" id="main-ace-style" />
<link rel="stylesheet" href="assets/css/ace-skins.min.css" />
<link rel="stylesheet" href="assets/css/ace-rtl.min.css" />
<script src="assets/js/ace-extra.min.js"></script>
<script src="~/assets/js/canvasjs.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/svg-pan-zoom@3.6.1/dist/svg-pan-zoom.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/StephanWagner/svgMap@v2.5.2/dist/svgMap.min.js"></script>
<link href="https://cdn.jsdelivr.net/gh/StephanWagner/svgMap@v2.5.2/dist/svgMap.min.css" rel="stylesheet">
<style>
    .lrt {
    font-size: 24px;
    display: inline-block;
    margin-top: -1px;
    position: absolute;
    margin-left: 6px;
    font-weight: 600;
}
.sublogo{
    margin-left:10px;
}
.sub-logo {
    margin-left: -61px;
}
#ace-settings-btn{
display:none;
}
.add_ara {
    margin-top: 3px;
    font-size: 19px;
    margin-bottom: -10px;
    font-weight: 600;
}
.add_add {
    margin-top: 21px;
    font-size: 16px;
    margin-bottom: 0px;
    font-weight: 600;
    color: #478FCA !important;
    display: inline-block;
}
.plus_sym {
    top: 2px;
    position: relative;
    padding-left: 2px;
}

.credit h3 {
    font-size: 14px;
    margin-bottom: 0px;
    font-weight: 600;
    color: #000 !important;
    margin-top: 5px;
}
.credit h4 {
    font-size: 14px;
    margin-bottom: 0px;
    font-weight: 600;
    color: #000 !important;
    margin-top: 5px;
}
.credit span{
  float: right;
}
.bill_add{
    font-size: 15px;
    margin-bottom: -10px;
    font-weight: 600;
}
.fl_right{
  float: right;
}
.br_right{
  border-right:1px solid #ddd;
}
#data_ui{
  width:100% !important;
  height: 500px !important;
}
.heading {
    margin-top: 29px;
    font-size: 19px;
    margin-bottom: 31px;
    font-weight: 600;
}
.grn{
color: green;
}
.red{
 color: red;
}
.img_sc{
width: 30px;
height: 30px;
}
.red_font{
  color:red;
  font-size: 14px;
}
.list_main .fa:hover {
    transform: scale(1.2);
}
.list_main .fa:hover {
    transform: scale(1.2);
}
.list_main .fa {
    transition: 0.3s;
}
.list_main .fa {
    transition: 0.3s;
}
.list_main li i {
    padding-right: 3px;
}
.bigger-120 {
    font-size: 120%!important;
}
.green {
    color: #69AA46!important;
}
.green {
    color: #69AA46 !important;
}
.green {
    color: #69AA46 !important;
}.comn_inline {
    display: inline-block;
    padding-left: 6px;
    font-size: 15px;
    padding-right: 6px;
}.list_main li {
    list-style: none;
    display: inline-block;
}
.list_main{
padding: 0px;
margin:0px
}
#myChart_bar{
height: 600px !important;
width: 600px !important;
display: block;
margin: auto;
}
#densityChart{
    height: 600px !important;
    width: 80% !important;
    display: block;
    margin: auto;
}
</style>
<script type="text/javascript">
    try { ace.settings.loadState('main-container') } catch (e) { }
</script>
<style>
    .btn-info1 {
        width: 97px !important;
        padding: 1px 7px !important;
    }
</style>
<div id="sidebar" class="sidebar responsive ace-save-state top-padding">
    <script type="text/javascript">
        try { ace.settings.loadState('sidebar') } catch (e) { }
    </script>

    <div class="sidebar-shortcuts" id="sidebar-shortcuts">
        <div class="sidebar-shortcuts-large" id="sidebar-shortcuts-large">
            <button class="btn btn-success">
                <i class="ace-icon fa fa-signal"></i>
            </button>

            <button class="btn btn-info">
                <i class="ace-icon fa fa-pencil"></i>
            </button>

            <button class="btn btn-warning">
                <i class="ace-icon fa fa-users"></i>
            </button>

            <button class="btn btn-danger">
                <i class="ace-icon fa fa-cogs"></i>
            </button>
        </div>

        <div class="sidebar-shortcuts-mini" id="sidebar-shortcuts-mini">
            <span class="btn btn-success"></span>

            <span class="btn btn-info"></span>

            <span class="btn btn-warning"></span>

            <span class="btn btn-danger"></span>
        </div>
    </div><!-- /.sidebar-shortcuts -->
    @{ Html.RenderAction("SideMenu", "Master");}

    @*<a href='javascript:void(0);' class='collapse'>click*@
    <div class="sidebar-toggle sidebar-collapse" id="sidebar-collapse">
        <a href='javascript:void(0);' class='collapse1'>
            <i id="sidebar-toggle-icon" class="ace-icon fa fa-angle-double-left ace-save-state" data-icon1="ace-icon fa fa-angle-double-left" data-icon2="ace-icon fa fa-angle-double-right"></i>
        </a>
    </div>
    @*</a>*@
</div>
<div class="main-content">
    <div class="main-content-inner top-padding">
        <div class="breadcrumbs ace-save-state" id="breadcrumbs">
            <ul class="breadcrumb">
                <li>
                    <i class="ace-icon fa fa-home home-icon"></i>
                    <a href="#">Vendor</a>
                </li>

                <li>
                    <a href="/Vendor/Index">Vendor Master</a>
                </li>
                <li class="active">Dashboard</li>
            </ul><!-- /.breadcrumb -->

            @*<div class="nav-search" id="nav-search">
                <form class="form-search">
                    <span class="input-icon">
                        <input type="text" placeholder="Search ..." class="nav-search-input" id="nav-search-input" autocomplete="off" />
                        <i class="ace-icon fa fa-search nav-search-icon"></i>
                    </span>
                </form>
            </div>*@
        </div>

        <style>
          .tb_td  .nav-tabs > li {
    float: left;
    margin-bottom: 8px;
}
          #myChart_bar {
    height: 487px !important;
    width: 487px !important;
    display: block;
    margin: auto;
}
        </style>

        <div class="page-content1">

            <div class="tabbable tb_td">
                <ul class="nav nav-tabs padding-12 tab-color-blue background-blue" >
                    <li class="">
                        <a href="/Vendor/VendorInvitation" aria-expanded="true">
                            <i class="fa fa-user"></i> Invite Vendor
                        </a>
                    </li>

                    <li class="">
                        <a href="/Vendor/VendorMaster" aria-expanded="false">
                            <i class="fa fa-edit"></i> Self Register
                        </a>
                    </li>

                    <li class="">
                        <a href="/Vendor/ListedVendor" aria-expanded="false">
                            <img src="./assets/images/listed.png" alt=""> Listed Vendor
                        </a>
                    </li>
                    <li class="">
                        <a href="/Vendor/PendingVendor" aria-expanded="false">
                            <img src="./assets/images/pending_form.png" alt=""> Pending Form
                        </a>
                    </li>

                    <li class="">
                        <a href="/Vendor/SetVendorPermission" aria-expanded="false">
                            <img src="./assets/images/user_permission.png" alt=""> Vendor Permission
                        </a>
                    </li>
                </ul>
            </div>


            <br />



            <div class="page-header">
                <div class="page-header">
                    <h3 class="item_hedin">
                        dashboard
                    </h3>
                </div>
            </div><!-- /.page-header -->



            <div class="vendor_mast">
                <div class="row">
                    <div class="col-sm-12 ">
                        <div class="widget-box">
                            <div class="widget-header widget-header-flat widget-header-small">
                                <h5 class="widget-title">
                                    <i class="ace-icon fa fa-user"></i>
                                    Mode of Registration
                                </h5>

                            
                            </div>

                            <div class="widget-body">
                                <div class="widget-main">
                                    <!-- <div id="piechart-placeholder"></div> -->

                                    <div class="container">
                                        <canvas id="myChart_bar"></canvas>
                                    </div>


                                </div><!-- /.widget-main -->
                            </div><!-- /.widget-body -->
                        </div><!-- /.widget-box -->
                    </div><!-- /.col -->
                    <!-- <div class="space-6"></div> </br></br> <div class="vspace-12-sm"></div> -->
                    <div class="col-sm-12 ">
                        <div class="widget-box">
                            <div class="widget-header widget-header-flat widget-header-small">
                                <h5 class="widget-title">
                                    <i class="ace-icon fa fa-user"></i>
                                    Vendor Type Stats
                                </h5>

                            </div>

                            <div class="widget-body">
                                <div class="widget-main">
                                    <div class="container">
                                        <canvas id="densityChart" width="600" height="400" chart-click="ctrl.onClick"></canvas>
                                    </div>




                                </div><!-- /.widget-main -->
                            </div><!-- /.widget-body -->
                        </div><!-- /.widget-box -->
                    </div>
                    <div class="col-sm-12 ">
                        <div class="widget-box">
                            <div class="widget-header widget-header-flat widget-header-small">
                                <h5 class="widget-title">
                                    <i class="ace-icon fa fa-user"></i>
                                    Vendor Presence Chart
                                </h5>

                               
                            </div>

                            <div class="widget-body">
                                <div class="widget-main">
                                    <div class="container">
                                        <!-- <canvas id="densityChart" width="600" height="400"></canvas> -->
                                        <div id="svgMap"></div>
                                    </div>




                                </div><!-- /.widget-main -->
                            </div><!-- /.widget-body -->
                          
                        </div><!-- /.widget-box -->
                    </div><!-- /.col -->
                </div>
            </div>
        </div>
      



    </div>
</div>





<script type="text/javascript">
    if ('ontouchstart' in document.documentElement) document.write("<script src='assets/js/jquery.mobile.custom.min.js'>" + "<" + "/script>");
</script>
<script src="assets/js/bootstrap.min.js"></script>

<!-- page specific plugin scripts -->
<!--[if lte IE 8]>
  <script src="assets/js/excanvas.min.js"></script>
<![endif]-->
<script src="assets/js/jquery-ui.custom.min.js"></script>
<script src="assets/js/jquery.ui.touch-punch.min.js"></script>
<script src="assets/js/jquery.easypiechart.min.js"></script>
<script src="assets/js/jquery.sparkline.index.min.js"></script>
<script src="assets/js/jquery.flot.min.js"></script>
<script src="assets/js/jquery.flot.pie.min.js"></script>
<script src="assets/js/jquery.flot.resize.min.js"></script>

<!-- ace scripts -->
<script src="assets/js/ace-elements.min.js"></script>
<script src="assets/js/ace.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.5.0/chart.min.js" integrity="sha512-asxKqQghC1oBShyhiBwA+YgotaSYKxGP1rcSYTDrB0U6DxwlJjU59B67U8+5/++uFjcuVM8Hh5cokLjZlhm3Vg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>

    $(document).ready(function () {
        Circularchar();
       Barchart();
       //ctrl.onClick = function (_points, _event, barClicked) {
       //    if (barClicked) {
       //        var associatedLabel = barClicked._model.datasetLabel;
       //        console.log("Label of the bar you clicked is " + associatedLabel);
       //    }
       //}
    });
</script>
<script>
   
    //$(document).ready(
    //             function () {
    //                 var ctx = document.getElementById("myChart_bar").getContext("2d");
    //                 var myNewChart = new Chart(ctx).Pie(data);
    //                 alert("toolTip Clicked!");
    //                 $("#myChart_bar").click(
    //                     function (evt) {
    //                         var activePoints = myNewChart.getSegmentsAtEvent(evt);
    //                         var url = "http://example.com/?label=" + activePoints[0].label + "&value=" + activePoints[0].value;
    //                         alert(url);
    //                     }
    //                 );
    //             }
    //         );
    
    //$(document).on("click", '#myChart_bar', function (e) {

    //        alert("toolTip Clicked!");
    //        var ctx = document.getElementById("myChart_bar").getContext("2d");
    //        var myNewChart = new Chart(ctx).Pie(data);
    //    //var activePoints = ctx.getElementsAtEvent(e);
    //        alert("toolTip Clicked!");
    //});
</script>
<script type="text/javascript">
    var myChart1 = document.getElementById('myChart_bar');
    function Circularchar() {
        
        let myChart = myChart1.getContext('2d');
        var sub_array = [];
        var super_array = [];
        var sub_array1 = [];
        var super_array1 = [];
        $.getJSON("/Vendor/VendorRegistrationStatuschart",
            function (json) {

                for (var i = 0; i < json.length; i++) {
                    sub_array.push("" + json[i].Label1 + "");
                    super_array.push(sub_array);
                    sub_array1.push("" + json[i].Count + "");
                    super_array1.push(sub_array1);
                }




                var doughnutData = new Chart(myChart_bar, {
                    type: 'pie',
                    data: {
                        labels:
                            sub_array ,
                        datasets: [{
                            label: 'Registration Type',
                            data:


                                sub_array1,

                            // backgroundColor:'green',
                            backgroundColor: [
                                '#20336e',
                                '#2589ad',
                                '#86ddd4',

                            ],

                            borderWidth: 1,
                            borderColor: '#777',
                            hoverBorderWidth: 3,
                            hoverBorderColor: '#000',
                        }],


                    },

                    options: {
                        plugins: {
                            title: {
                                display: true,
                                text: '',
                                fontSize: 35,
                                color: '#000',
                            }
                        }
                        , onClick: function (c, i) {
                            e = i[0];
                           // console.log(e.index)
                            var x_value = this.data.labels[e.index];
                           // var y_value = this.data.datasets[0].data[e.index];
                           // alert(x_value);
                            window.location.replace("/Vendor/ListedVendor/" + x_value);
                        }
                        ,
                        animations: {
                            tension: {
                                duration: 1000,
                                easing: 'linear',
                                from: 1,
                                to: 0,
                                loop: true
                            }
                        },

                    },
                });

                //myChart1.onclick = function (evt) {
                //    alert();
                //    var activePoints = doughnutData.getElementsAtEvent(evt);
                //    alert(activePoints[0]);
                //    if (activePoints[0]) {
                //        var chartData = activePoints[0]['_chart'].config.data;
                //        var idx = activePoints[0]['_index'];

                //        var label = chartData.labels[idx];
                //        var value = chartData.datasets[0].data[idx];

                //        var url = "http://example.com/?label=" + label + "&value=" + value;
                //        console.log(url);
                //        alert(url);
                //    }
                //};
           
            });
       
    }
   
</script>



 
<script type="text/javascript">
    function Barchart() {
        let densityCanvas = document.getElementById('densityChart').getContext('2d');
        var dataPoints = [];
        var densityData = [];
        var gravityData = [];
        var gravityData1 = [];
        var data2 = [];
        var Count1 = 0;
        $.getJSON("/Vendor/VendorCompanyStatuschart",

            function (data) {
                // alert(data);
                var name = [];
                var marks = [];
                var marks1 = [];
                var marks2 = [];
                var data1 = '';
             
               
                for (var i in data) {
                  
                  
                    var datap = (data[i].Label2);
                   
                    if (name.includes(datap)) {
                       // name.push(data[i].Label2);
                       // alert("1->" + datap)
                       // alert("1->" + data[i].Label1)
                       
                      }
                 else {
                        name.push(data[i].Label2);
                        //alert("2->" + datap)
                       // alert("2->" + data[i].Label1)
                      
                        Count1 = Count1 + 1
                       
                    } 
                }
               
                for (var i1 = 0; i1 < name.length; i1++) {
                    var data1 = name[i1];
                   
                    for (var i in data) {
                        var data2 = data[i].Label2;
                        if (data1 == data2) {
                            if (data[i].Label1 == 'Blacklisted') {
                                marks.push(data[i].Count);
                                // marks1.push(0);
                            }
                            
                        }
                       
                    }
                 
                    for (var i in data) {
                        var data2 = data[i].Label2;
                        if (data1 == data2) {
                           
                            if (data[i].Label1 == 'Active') {
                                marks1.push(data[i].Count);
                            }
                           
                        }
                      
                    }
                   
                    for (var i in data) {
                        var data2 = data[i].Label2;
                        if (data1 == data2) {
                           
                           
                            if (data[i].Label1 == 'Stand By') {
                                marks2.push(data[i].Count);
                            }
                        }
                       
                    }
                    if (marks.length < (i1 + 1)) {
                        marks.push(0);
                    }
                    if (marks1.length < (i1 + 1)) {
                        marks1.push(0);
                    }
                    if (marks2.length < (i1 + 1)) {
                        marks2.push(0);
                    }
                    //alert("i1->" + (i1 + 1))
                    //alert("marks->" + marks.length)
                    //alert("marks1->" + marks1.length)
                    //alert("marks2->" + marks2.length)
                   }
               
                
                var chartdata = {
                    labels: name,
                    datasets: [
						{
						    label: 'Blacklisted',
						    backgroundColor: '##c0c0c0',
						    data:  marks
						},
                    {
                        label: 'Active',
                        backgroundColor: '#7c9cd6',
                        data:  marks1
                    },
                    {
                        label: 'Stand By',
                        backgroundColor: '#f2a46e',
                        data:marks2
                    }
                    ] 
                };

               var graphTarget = $("#densityChart");
               canvas = document.getElementById('densityChart')
              
                var graph = new Chart(graphTarget, {
                    type: 'bar',
                    data: chartdata
                  ,
                        options: {
                            onClick: function (evt, item) {
                                window.location.replace("/Vendor/ListedVendor");
                               // const idx = item.findIndex(evt.x)
                //                const idx = chart.getElementAtEvent(event)[0]._index;
                //console.log(data[idx]);
            }
                }
                });
                //document.getElementById("densityChart").indexofonclick = function (evt) {
                //    alert(evt);
                //    var activePoints = graph.Tooltip;
                //    alert(activePoints);
                //    //var firstPoint = activePoints[0];
                //    //alert(firstPoint._index);
                //    //var label = graph.data.labels[firstPoint._index];
                //    //var value = graph.data.datasets[firstPoint._datasetIndex].data[firstPoint._index];
                //    //alert(label + ": " + value);
                //};
                
            });
    } 
</script>

<script type="text/javascript">

    /* map Chart Js  */
    function mapchar() {

        var dataPoints = [];

        var dataPoints1 = [];
        //alert("done");
        $.getJSON("/Vendor/VendorStatuschart",

            function (json) {
                for (var i = 0; i < json.length; i++) {
                    dataPoints.push( json[i].Label2);
                    dataPoints1.push(json[i].Label1);
                    //alert(dataPoints);
                }

                new svgMap({
                    targetElementID: 'svgMap',
                    data: {
                        data: {
                            LRT: {
                                name: 'Vendor Name',
                                //format: '{0} USD',
                                format: '{0}',
                                thousandSeparator: ',',
                                thresholdMax: 50000,
                                thresholdMin: 1000
                            },
                            change: {
                                name: 'Status',
                                //format: '{0} %'
                                format: '{0}'
                            }
                        },
                        applyData: 'LRT',
                        values: {

                            //AF: { LRT: 587, change: 4.73 },
                            ///AL: { LRT: 4583, change: 11.09 },
                            //DZ: { LRT: 4293, change: 10.01 },
                            //IN: { LRT: json[i].Label2, change: json[i].Label1 },
                            IN: { LRT: dataPoints, change: dataPoints1 },
                            //RU: { LRT: 5670, change: 10.01 },


                        }
                    }

                });

                //}

            });
    }

</script>